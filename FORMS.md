## Specification of form manipulation


Specification of the value-to-form processing in Lexibank datasets:

The value-to-form processing is divided into two steps, implemented as methods:
- `FormSpec.split`: Splits a string into individual form chunks.
- `FormSpec.clean`: Normalizes a form chunk.

These methods use the attributes of a `FormSpec` instance to configure their behaviour.

- `brackets`: `{}`
  Pairs of strings that should be recognized as brackets, specified as `dict` mapping opening string to closing string
- `separators`: `,;/`
  Iterable of single character tokens that should be recognized as word separator
- `missing_data`: `('-', '?', '???', '+')`
  Iterable of strings that are used to mark missing data
- `strip_inside_brackets`: `True`
  Flag signaling whether to strip content in brackets (**and** strip leading and trailing whitespace)
- `replacements`: `[('(general)', ''), ('(modern)', ''), ('(see below)', ''), ('(uncommon)', ''), ('[general]', ''), (' ? ', ' '), ('(?)', ''), ('(!)', ''), ('(?!)', ''), ('(noun)', ''), ('(object)', ''), ('(pl)', ''), ('(s.)', ''), ('(s.+pl.)', ''), ('(sg)', ''), ('(sing.)', ''), ('(sing.oromambo)', ''), ('[+ poss.]', ''), ('[gen.]', ''), ('(adopted)', ''), ('(eng.)', ''), ('(swahili)', ''), ('(a?)', 'a'), ('(a)', 'a'), ('(cha)', 'cha'), ('(e)', 'e'), ('(g)', 'g'), ('(gU)', 'gU'), ('(gu)', 'gu'), ('(h)', 'h'), ('(i)', 'i'), ('(y)', 'y'), ('(k)', 'k'), ('(khu)', 'khu'), ('(ki)', 'ki'), ('(ko)', 'ko'), ('(ku)', 'ku'), ('(kU)', 'kU'), ('(kw)', 'kw'), ('(kwa)', 'kwa'), ('(kwe)', 'kwe'), ('(kwi)', 'kwi'), ('(l)', 'l'), ('(li)', 'li'), ('(ma-)', 'ma-'), ('(ma)', 'ma'), ('(mu)', 'mu'), ('(n)', 'n'), ('(na)', 'na'), ('(o)', 'o'), ('(oko)', 'oko'), ('(oku)', 'oku'), ('(okw)', 'okw'), ('(s)', 's'), ('(t)', 't'), ('(u)', 'u'), ('(uku)', 'uku'), ('(ukw)', 'ukw'), ('(w)', 'w'), ('(wa)', 'wa'), ('(ya)', 'ya'), ('(zi)', 'zi'), ('(-human)', ''), ('(-idi in counting)', ''), ('(a sick person)', ''), ('(anim.)', ''), ('(animal)', ''), ('(animals)', ''), ('(arm)', ''), ('(banana tree)', ''), ('(belly)', ''), ('(big iron)', ''), ('(biki=piece of wood)', ''), ('(birds)', ''), ('(borrow)', ''), ('(boy)', ''), ('(boys)', ''), ('(brother in law)', ''), ('(cattle)', ''), ('(chin,jaw)', ''), ('(crust)', ''), ('(dying animals)', ''), ('(eyes)', ''), ('(fam.)', ''), ('(father in law)', ''), ('(female)', ''), ('(fire)', ''), ('(for a person)', ''), ('(girl)', ''), ('(girls)', ''), ('(grandpa)', ''), ('(grass)', ''), ('(green)', ''), ('(groan)', ''), ('(grow up,ripen)', ''), ('(hand)', ''), ('(hands)', ''), ('(heat)', ''), ('(hole)', ''), ('(human)', ''), ('(hyena)', ''), ('(lend)', ''), ('(lion)', ''), ('(listen)', ''), ('(male)', ''), ('(mother)', ''), ('(mouth)', ''), ('(nest)', ''), ('(of church)', ''), ('(of house)', ''), ('(people)', ''), ('(person)', ''), ('(seed,grain)', ''), ('(sick person)', ''), ('(sister in law)', ''), ('(sister)', ''), ('(skin bark)', ''), ('(smoking)', ''), ('(snail)', ''), ('(spoil,destroy)', ''), ('(thick foest)', ''), ('(thick forest)', ''), ('(thing)', ''), ('(unexpectedly)', ''), ('(unripe)', ''), ('(verb of carrying the things and piling them)', ''), ('(water)', ''), ('(woman)', ''), ('[b-i-l]', ''), ('[female]', ''), ('[male]', ''), ('[s-i-l]', ''), ('( before heavy rains-litulo)', ''), ('( trad. langi =kiriva)', ''), ('(-)', ''), ('(???)', ''), ('(??)', ''), ('(?Sw.)', ''), ('(..?)', ''), ('(...i)', ''), ('(+human)', ''), ('(= bundle)', ''), ('(= pombe)', ''), ('(=?)', ''), ('(=akula)', ''), ('(=aneko)', ''), ('(=be blown by the wind)', ''), ('(=cloth)', ''), ('(=collect)', ''), ('(=in?)', ''), ('(=kimeoza)', ''), ('(=kuliya)', ''), ('(143)', ''), ('(1a moto)', ''), ('(7)', ''), ('(9-10 mbisi)', ''), ('(a drink)', ''), ('(a guest)', ''), ('(a kind of snake)', ''), ('(abakori pl.)', ''), ('(action)', ''), ('(akEEma pl.)', ''), ('(always in plural)', ''), ('(always plural)', ''), ('(amakara pl.)', ''), ('(amareko pl.)', ''), ('(amatu pl.)', ''), ('(amavega pl.)', ''), ('(and kilema)', ''), ('(any alc.drink)', ''), ('(any other)', ''), ('(army)', ''), ('(arrow)', ''), ('(as a weapon)', ''), ('(as in : kumbwa)', ''), ('(as selling)', ''), ('(baby)', ''), ('(back hip)', ''), ('(banana wine)', ''), ('(bananas)', ''), ('(bask)', ''), ('(be hot)', ''), ('(be ill)', ''), ('(be sterile)', ''), ('(become weak)', ''), ('(beer)', ''), ('(beings)', ''), ('(bh? gh?)', ''), ('(blind)', ''), ('(both edged)', ''), ('(both)', ''), ('(br.)', ''), ('(breast milk)', ''), ('(breathe)', ''), ('(brother)', ''), ('(bury:clothe)', ''), ('(but in pairs)', ''), ('(but see vatangala)', ''), ('(cage)', ''), ('(calf)', ''), ('(can also mean to find-tafuta)', ''), ('(canoe)', ''), ('(carrier)', ''), ('(castrated bull)', ''), ('(chief)', ''), ('(child)', ''), ('(childish)', ''), ('(childran)', ''), ('(chongi sg.)', ''), ('(cl.1)', ''), ('(cl.9)', ''), ('(clan)', ''), ('(class 1)', ''), ('(climb:scrape)', ''), ('(close eyes)', ''), ('(close mouth)', ''), ('(cloth)', ''), ('(clothes)', ''), ('(coinage)', ''), ('(collect)', ''), ('(conn.to -sha?)', ''), ('(connected with sinning)', ''), ('(current use)', ''), ('(daylight)', ''), ('(depends on noun)', ''), ('(dirt)', ''), ('(dry grass)', ''), ('(dry skin -animal)', ''), ('(e?)', ''), ('(e.g.chief)', ''), ('(ebhigero pl.)', ''), ('(eg. bananas)', ''), ('(eg. beads)', ''), ('(eg. for hair)', ''), ('(eg.house)', ''), ('(eg.knife)', ''), ('(eg.rain)', ''), ('(eg.stick)', ''), ('(ekitoke sing.)', ''), ('(emikiria pl.)', ''), ('(esafari ?!)', ''), ('(esp. of wife)', ''), ('(ezitetere.pl.)', ''), ('(fear God)', ''), ('(fem.)', ''), ('(fem)', ''), ('(fetch)', ''), ('(fierce)', ''), ('(fina for things)', ''), ('(five and three)', ''), ('(flock)', ''), ('(flutter)', ''), ('(fly)', ''), ('(follow in order)', ''), ('(food)', ''), ('(foot)', ''), ('(for a boy)', ''), ('(for a cow)', ''), ('(for animals)', ''), ('(for any girl)', ''), ('(for any metal)', ''), ('(for anything unfeminine )', ''), ('(for axe)', ''), ('(for beer)', ''), ('(for creatures)', ''), ('(for fire)', ''), ('(for fruit)', ''), ('(for girl)', ''), ('(for heaven)', ''), ('(for hoe)', ''), ('(for human)', ''), ('(for iron ore)', ''), ('(for kitchen)', ''), ('(for large animals)', ''), ('(for men)', ''), ("(for mother's milk)", ''), ('(for mtu)', ''), ('(for ndizi)', ''), ('(for non-domestic animals)', ''), ('(for person-mbaha)', ''), ('(for specific inguiry)', ''), ('(for the old)', ''), ('(for thirsty)', ''), ('(for tunda)', ''), ('(for up)', ''), ('(for visitors)', ''), ('(for watu)', ''), ('(for women)', ''), ('(forehead)', ''), ('(forest)', ''), ('(fruit)', ''), ('(fruits)', ''), ('(general term)', ''), ('(general word)', ''), ('(good person)', ''), ('(guest)', ''), ('(h?)', ''), ('(h=k ?)', ''), ('(harvest)', ''), ('(hearth)', ''), ('(her)', ''), ('(herself)', ''), ('(his)', ''), ('(hook)', ''), ('(horizon)', ''), ('(house roof)', ''), ('(hut)', ''), ('(if a saucepan)', ''), ("(if it's meat)", ''), ('(if of maize)', ''), ('(if on electric chair)', ''), ('(in a river)', ''), ('(in ancient stories = aeroplane)', ''), ('(in case of disease-kutamba)', ''), ('(in nyonga)', ''), ('(in plural)', ''), ('(in polite language)', ''), ('(in water)', ''), ('(intr. v)', ''), ('(iron tools)', ''), ('(it never stands alone)', ''), ('(itch)', ''), ('(ivory)', ''), ('(jaw(=kireju)', ''), ('(jesus)', ''), ('(kanda-adopted now)', ''), ('(kubamba [for fish])', ''), ('(kufin..?)', ''), ('(kugwaala - to be)', ''), ('(kungo?-season)', ''), ('(kupumula ?)', ''), ('(kuura-house)', ''), ('(kwejuna -polite)', ''), ('(latent fire usually under ashes=orumota)', ''), ('(leaf)', ''), ('(lean)', ''), ('(leave(off)', ''), ('(leg and foot)', ''), ('(leg)', ''), ('(let off)', ''), ('(lift spell)', ''), ('(long)', ''), ('(look for)', ''), ('(mahuti?)', ''), ('(maize &beans)', ''), ('(maize)', ''), ('(male of animals)', ''), ('(man)', ''), ('(many)', ''), ('(maongi pl.)', ''), ('(masc. and fem.?)', ''), ('(masc)', ''), ('(maselege:pl.)', ''), ('(mayoyolo pl.)', ''), ('(meaning same as ku-pumzika)', ''), ('(means across the other side of)', ''), ('(meno pl.)', ''), ('(modern usage)', ''), ('(mole hill)', ''), ('(money)', ''), ('(mother in law)', ''), ('(mwitha(while being milked)', ''), ('(my brother in law)', ''), ('(my father in law)', ''), ('(my)', ''), ('(myself)', ''), ('(name of )', ''), ('(ngooya +)', ''), ('(njwili pl.)', ''), ('(no cattle)', ''), ('(no difference)', ''), ('(no pl.)', ''), ('(no plural)', ''), ('(no tomato)', ''), ('(not sure)', ''), ('(not=-shunda)', ''), ('(noun & verb)', ''), ('(noun- lihako)', ''), ('(noun:umudiido)', ''), ('(nyuka or -nyukuta)', ''), ('(nyumbu pl.)', ''), ('(o.s.)', ''), ('(o.s.agsinst)', ''), ('(obhotara?)', ''), ('(objects)', ''), ('(of 602)', ''), ('(of a trap)', ''), ('(of a tree)', ''), ('(of animals)', ''), ('(of birds)', ''), ('(of butter)', ''), ('(of child?)', ''), ('(of dead animal-orwamba)', ''), ('(of maize)', ''), ('(of mountain)', ''), ('(of parents)', ''), ('(of poles)', ''), ('(of soil)', ''), ('(of solutions)', ''), ('(of tobacco)', ''), ('(of tree)', ''), ('(old domestic animal past bearing)', ''), ('(old Haya-Butani)', ''), ('(old Haya-kuteeka)', ''), ('(old man)', ''), ('(old)', ''), ('(older than father)', ''), ('(omoghaka(old man)', ''), ('(omukama?)', ''), ('(omumwi-jua?)', ''), ('(on bed)', ''), ('(on its own)', ''), ('(on the back)', ''), ('(on the body)', ''), ('(on the head)', ''), ('(one)', ''), ('(only with the tongue)', ''), ('(opl.amabara)', ''), ('(opposite sex)', ''), ('(or akanwa-mouth cavity)', ''), ('(or ifwagilo)', ''), ('(or inzoka gwiba)', ''), ('(or kunoga)', ''), ('(or kuUnda)', ''), ('(or makuju)', ''), ('(or masiine)', ''), ('(or munjoro)', ''), ('(or nshaasha)', ''), ('(or ulukwe ulufupi)', ''), ('(order)', ''), ('(ordinary milk)', ''), ('(original)', ''), ('(oroheke sing.)', ''), ('(p?)', ''), ('(pass.)', ''), ('(pass)', ''), ("(people's)", ''), ('(pick up)', ''), ('(pl sengonge)', ''), ('(pl?)', ''), ('(Pl. amola)', ''), ('(Pl. matunda)', ''), ('(Pl. milongo)', ''), ('(plant)', ''), ('(playground)', ''), ('(polishing ma..)', ''), ('(preceded by qualifying noun)', ''), ('(pronounced nkhuni)', ''), ('(pronounciation)', ''), ('(pull out fishnets)', ''), ('(r? s?)', ''), ('(reflexive)', ''), ('(rely on)', ''), ('(repairing implement)', ''), ('(rera(tall)', ''), ('(respected)', ''), ('(row)', ''), ('(s +pl.)', ''), ('(s?)', ''), ('(s. +pl.)', ''), ('(s.eikala)', ''), ('(s.nene)', ''), ('(same sex)', ''), ('(sg & pl)', ''), ('(sg. chobo)', ''), ('(sg. iyoyo)', ''), ('(sg. linyahi)', ''), ('(sg. lUlezu)', ''), ('(sg. ukogoto)', ''), ('(sg.)', ''), ('(sharp)', ''), ('(shoulder)', ''), ('(si.)', ''), ('(si)', ''), ('(sib-in-law)', ''), ('(sick man)', ''), ('(sick)', ''), ('(side of the face)', ''), ('(sing & pl)', ''), ('(sing.ichyatsi)', ''), ('(sing.itako)', ''), ('(sing.lidako)', ''), ('(sing.likala)', ''), ('(sing)', ''), ('(single edged)', ''), ('(sis.)', ''), ('(sister-in-law of woman)', ''), ('(skin)', ''), ('(slug)', ''), ('(small ant sp.)', ''), ('(small finger)', ''), ('(small goat)', ''), ('(small stick)', ''), ('(small)', ''), ('(somebody)', ''), ('(something)', ''), ('(sow)', ''), ('(spirit of the dead)', ''), ('(stand up)', ''), ('(stative?)', ''), ('(sticks on surface)', ''), ('(stool)', ''), ('(stranger)', ''), ('(surpass)', ''), ('(Sw.?)', ''), ('(sw.)', ''), ('(Sw.)', ''), ('(sw.choka)', ''), ('(sw.chura)', ''), ('(sw.etu)', ''), ('(sw.kaanga)', ''), ('(sw.kichaka)', ''), ('(sw.kijiji)', ''), ('(sw.kilima)', ''), ('(sw.kuchakura)', ''), ('(sw.kuigawanya)', ''), ('(sw.kuimba)', ''), ('(sw.kuruka)', ''), ('(sw.kuteta)', ''), ('(sw.kuumba)', ''), ('(sw.maini)', ''), ('(sw.mzinga)', ''), ('(sw.nguo)', ''), ('(sw.tende)', ''), ('(sw.tundu)', ''), ('(sw.ubongo)', ''), ('(sw.ulozi)', ''), ('(sw.yenu)', ''), ('(swa)', ''), ('(sweat)', ''), ('(synonym)', ''), ('(take off(clothes)', ''), ('(teach)', ''), ('(the dance)', ''), ('(the other morrow)', ''), ('(things)', ''), ('(to be)', ''), ('(to boys)', ''), ('(to catch)', ''), ('(to close the eyes)', ''), ('(to fold)', ''), ('(to get permission)', ''), ('(to girls)', ''), ('(to judge)', ''), ('(to lie face downwards)', ''), ('(to look after cattle)', ''), ('(to make round)', ''), ('(to milk)', ''), ('(tree)', ''), ("(type of ng'au)", ''), ('(uncircumcized)', ''), ('(uncommon in my place)', ''), ('(uncooked)', ''), ('(unknown in my area)', ''), ('(urine)', ''), ('(use grass)', ''), ('(use hands)', ''), ('(use legs)', ''), ('(used for path)', ''), ('(using a hook)', ''), ('(V-length?)', ''), ('(v. kona)', ''), ('(various kinds)', ''), ('(vb.kuguma)', ''), ('(vb)', ''), ('(verb?)', ''), ('(verb)', ''), ('(wamweto -no fem. or masc.)', ''), ('(where women sleep)', ''), ('(white)', ''), ('(whitewash)', ''), ('(wide-mouth)', ''), ('(wild flower)', ''), ('(wild)', ''), ('(with earth)', ''), ('(without foreskin)', ''), ('(wooden ?)', ''), ('(wooden)', ''), ('(workers)', ''), ('(worn on the feet)', ''), ('(worn out)', ''), ('(younger)', ''), ('(your father)', ''), ('(your)', ''), ('(yours)', ''), ('(ziba call it katenyanja)', ''), ('(ziba ekitenge)', ''), ('(ziba nshanje)', ''), ('[at cock-crow]', ''), ('[bring]', ''), ('[close eyes]', ''), ('[eceka:le]', ''), ('[eceno*:nu]', ''), ('[fetch]', ''), ('[kolamba iko*:fi]', ''), ('[kote*:fja]', ''), ('[o:nde*:zi]', ''), ('[of tree]', ''), ('[olosi:ko]', ''), ('[omwe*:ne*]', ''), ('[oocelo:me*:]', ''), ('[oov*e:nu]', ''), ('[owa:ja]', ''), ('[Sw. njoo]', '')]`
  List of pairs (`source`, `target`) used to replace occurrences of `source` in formswith `target` (before stripping content in brackets)
- `first_form_only`: `False`
  Flag signaling whether at most one form should be returned from `split` - effectively ignoring any spelling variants, etc.
- `normalize_whitespace`: `True`
  Flag signaling whether to normalize whitespace - stripping leading and trailing whitespace and collapsing multi-character whitespace to single spaces
- `normalize_unicode`: `None`
  UNICODE normalization form to use for input of `split` (`None`, 'NFD' or 'NFC')

### Replacement of invalid lexemes

Source lexemes may be impossible to interpret correctly. 2706 such lexemes are listed
in [`etc/lexemes.csv`](etc/lexemes.csv) and replaced as specified in this file.
